version: '3'
services:
  file-db:
    image: 'postgres'
    environment:
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
#    restart: always

  file-manager:
    depends_on:
      - file-db
    build: 'server/.'
    image: 'full-share-file-manager'
    ports:
     - '8081:8080'
    volumes:
     - download-volume:/download
#    restart: always

  full-share-nginx:
    depends_on:
      - file-manager
    build: 'nginx'
    image: 'full-share-nginx'
    volumes:
     - './web/build/web:/usr/share/nginx/html'
     - download-volume:/full-share/download
    ports:
     - '8080:80'
#    restart: always

volumes:
  download-volume: